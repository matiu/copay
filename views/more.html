<div class="backup" ng-controller="MoreController">
  <h1 translate>Settings </h1>
  <div class="large-12 columns panel">
    <h2><i class="fi-download m10r"></i> <span translate>Backup</span> </h2>
    <p translate class="text-gray">
      It's important to backup your wallet so that you can recover it in case of disaster
    </p>
    <a translate class="button primary m0" ng-click="downloadBackup()"
      ng-show="!isSafari">Download File</a>
    <a translate class="button primary m0" ng-click="viewBackup()"
      ng-show="isSafari && !hideViewBackup">View Backup</a>
    <div ng-show="backupPlainText">
      <div class="show-for-large-up">
        <textarea readonly rows="5">{{backupPlainText}}</textarea>
        <span translate class="size-12">Copy to clipboard</span> <span class="btn-copy" clip-copy="backupPlainText"> </span>
        <div translate class="m10t size-12 text-gray text-right">Copy this text as it is in a safe place (notepad or email)</div>
      </div>
      <div class="hide-for-large-up">
        <div class="ellipsis backup-plain-text">{{backupPlainText}}</div>
        <button class="button secondary m0" 
          ng-click="sendEmail(backupPlainText)" translate>Send by Email</button>
        <div translate class="m10v size-12">Warning: Chrome for iOS removes some symbols from backup when opening Gmail client, please use only Safari on iOS (it open native Email application)</div>
      </div>
    </div>
  </div>
  <div class="large-12 columns line-dashed-h m15b"></div>
  <div class="row collapse">
    <form name="settingsForm" class="large-6 small-12 columns">
      <fieldset>
        <legend translate>Wallet Unit</legend>
        <select class="form-control" ng-model="selectedUnit" ng-options="o.name for o in unitOpts" ng-change="save()">
        </select>
      </fieldset>
      <fieldset>
        <legend translate>Alternative Currency</legend>
        <select class="form-control" ng-model="selectedAlternative" ng-options="alternative.name for alternative in alternativeOpts" ng-change="save()">
        </select>
      </fieldset>
    </form>
  </div>
  <div class="large-12 columns line-dashed-h m15b"></div>
  <div class="oh large-12 columns panel">
    <h3><i class="fi-minus-circle m10r"></i> <span translate> Delete Wallet </span></h3>
    <p translate class="large-8 columns text-gray">If all funds have been removed from your wallet and you do not wish to have the wallet data stored on your computer anymore, you can delete your wallet.</p>
    <div class="large-4 columns">
      <a translate class="button warning expand" ng-really-message="{{'Are you sure to delete this wallet from this computer?'|translate}}" ng-really-click="deleteWallet()"> Delete</a>
    </div>
  </div>
  <p>
    <a class="expand small" ng-click="hideAdv=!hideAdv">
      <i class="fi-widget m3r"></i>
      <span translate ng-hide="!hideAdv">Show</span> 
      <span translate ng-hide="hideAdv">Hide</span> 
      <span translate>advanced options</span>
    </a>


    <div ng-hide="hideAdv" class="m10t">
      <div class="oh large-12 columns panel">
        <h3><i class="fi-minus-circle m10r"></i> 
        <span translate>Master Private Key</span> </h3>
        <p translate class="large-8 columns text-gray">
          Your master private key contains the information to sign <b>any</b> transaction on this wallet. Handle with care.
        </p>
        <div class="large-4 columns">
          <a class="button primary expand" ng-click="hidePriv=!hidePriv">
            <span translate ng-hide="!hidePriv">Show</span>
            <span translate ng-hide="hidePriv">Hide</span>
          </a>
        </div>
        <textarea ng-hide="hidePriv" readonly>{{priv}}</textarea>
      </div>
      <div class="oh large-12 columns panel">
        <h3><i class="fi-minus-circle m10r"></i> <span translate>Scan Wallet Addresses</span> </h3>
        <p translate class="large-8 columns text-gray">
          This will scan the blockchain looking for addresses derived from your wallet, in case you have funds in addresses not yet generated (e.g.: you restored an old backup). This will also trigger a syncronization of addresses to other connected peers.
        </p>
        <div class="large-4 columns">
          <a translate class="button primary expand" ng-click="updateIndexes()">
            Scan
          </a>
        </div>
      </div>
      <div class="oh large-12 columns panel">
        <h3><i class="fi-minus-circle m10r"></i> <span translate>Purge Pending Transaction Proposals</span> </h3>
        <p translate class="large-8 columns text-gray">
          Pending Transactions Proposals will be discarted. This needs to be done on <b>ALL</b> peers of a wallet, to prevent the old proposals to be resynced again.
        </p>
        <div class="large-4 columns">
          <a translate class="button warning expand"  ng-click="purge()">
            Purge
          </a>
        </div>
    </div>
    <div class="oh large-12 columns panel">
      <h3><i class="fi-minus-circle m10r"></i> <span translate>Purge ALL Transaction Proposals</span> </h3>
        <p translate class="large-8 columns text-gray">
        ALL Transactions Proposals will be discarted. This needs to be done on <b>ALL</b> peers of a wallet, to prevent the old proposals to be resynced again.
        </p>
        <div class="large-4 columns">
          <a translate class="button warning expand"  ng-click="purge(true)">
            Purge All
          </a>
        </div>
    </div>
    <div class="oh large-12 columns panel">
      <h3><i class="fi-minus-circle m10r"></i> 
      <span translate>Join Secret</span> </h3>
      <p translate class="large-8 columns text-gray">
        This is the initial secret join string. Since your wallet it is already complete, this is only useful to rejoin peers that loose their backup BUT have the extented private key stored (they will be rejected on other case). They need to enter their extended private key during the join process (in advenced options).
      </p>
      <div class="large-4 columns">
        <a class="button primary expand" ng-click="hideSecret=!hideSecret">
          <span translate ng-hide="!hideSecret">Show</span>
          <span translate ng-hide="hideSecret">Hide</span>
        </a>
      </div>
      <textarea ng-hide="hideSecret" readonly>{{secret}}</textarea>
    </div>
 
  </div>

</div>
